{% extends "layout.html" %}
{% from "bootstrap.html" import colorful_label, table with context %}

{% block title %}Manage Movies{% endblock %}

{% block content %}
  {% call table(columns=['ID', 'Name', 'Category', 'Server', 'Connections', 'Settings']) %}
    {% for movie in movies %}
      <tr>
        <td>{{ movie.id }}</td>
        <td><div class="badge bg-primary">{{ movie.name }}</div></td>
        <td>{{ colorful_label(movie.category or '') }}</td>
        <td>{{ colorful_label(movie.server) }}</td>
        <td>{{ movie.connections }}</td>
        <td>
          <a href="{{ url_for('movie.settings', movie=movie) }}" class="btn btn-link">
            <i class="fa fa-cog" title="settings"></i>
          </a>

          <form action="{{ url_for('movie.delete', movie=movie) }}" method="post">
            <button type="submit" class="btn btn-link"
                    data-toggle="confirmation"
                    data-message="Please confirm to delete the movie {{ movie.id }} {{ movie.name }}?">
              <i class="fa fa-times text-danger" title="delete"></i>
            </button>
          </form>
        </td>
      </tr>
    {% endfor %}
  {% endcall %}
{% endblock %}
