{% extends "layout.html" %}
{% from "bootstrap.html" import colorful_label, table, form_group, input with context %}

{% block title %}Manage Accounts{% endblock %}

{% block content %}
  {% call table(columns=['ID', 'Username', 'Email', 'Credits', 'Role', 'Last Login At', 'Last Login IP', 'Settings']) %}
    {% for account in accounts %}
      <tr>
        <td>{{ account.id }}</td>
        <td>
          <div class="badge bg-primary">{{ account.username }}</div>
        </td>
        <td>{{ account.email or '' }} </td>
        <td>{% if account.role in ('reseller', 'subreseller') %} {{ account.credits }} {% else %} - {% endif %}</td>
        <td>{{ colorful_label(account.role|capitalize) }}</td>
        <td>{{ account.last_login_at or '' }}</td>
        <td>{{ account.last_login_ip or '' }}</td>
        <td>
          <a href="{{ url_for('account.settings', account=account) }}" class="btn btn-link">
            <i class="fa fa-cog" title="settings"></i>
          </a>

          <form action="{{ url_for('account.delete', account=account) }}" method="post">
            <button type="submit" class="btn btn-link"
                    data-toggle="confirmation"
                    data-message="Please confirm to delete the account {{ account.id }} {{ account.username }}?">
              <i class="fa fa-times text-danger" title="delete"></i>
            </button>
          </form>
        </td>
      </tr>
    {% endfor %}
  {% endcall %}
{% endblock %}
