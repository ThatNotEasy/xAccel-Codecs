{% extends "layout.html" %}

{% block title %}Log{% endblock %}

{% block content %}
  <div class="card card-default">
    <div class="card-header" style="display: inline-block;">
      <h6 class="card-title" style="display: inline-block">{{ title }}</h6>
      <div class="float-right">
        <form method="post">
          <button class="btn btn-link" type="submit" formaction="{{ url_for_delete }}"
                  title="Delete" style="padding: 0; margin-right: 10px;">
            <i class="fas fa-trash-alt text-danger"></i>
          </button>

          <button class="btn btn-link" type="submit" formaction="{{ url_for_download }}"
                  title="Download" style="padding: 0;">
            <i class="fas fa-arrow-circle-down"></i>
          </button>
        </form>
      </div>
    </div>
    <div class="card-body" style="font-family: monospace; white-space: pre-wrap; word-break: break-all; padding-top: 0; padding-bottom: 0">
      {% for level, message in logs %}
        {% if av_log %}
          {% autoescape false -%}{{ av_log_html(message, level) }}{%- endautoescape %}
        {% else %}
          {% if level == 'WARNING' %}
            {% autoescape false -%}<div class="text-warning">{{ message }}</div>{%- endautoescape %}
          {% elif level == 'ERROR' or level == 'CRITICAL' %}
            {% autoescape false -%}<div class="text-danger">{{ message }}</div>{%- endautoescape %}
          {% else %}
            {% autoescape false -%}<div class="text-success">{{ message }}</div>{%- endautoescape %}
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
  </div>
{% endblock %}
